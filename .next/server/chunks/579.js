exports.id=579,exports.ids=[579],exports.modules={30007:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,25251,23)),Promise.resolve().then(r.t.bind(r,41297,23)),Promise.resolve().then(r.t.bind(r,42796,23)),Promise.resolve().then(r.bind(r,37303)),Promise.resolve().then(r.bind(r,21019)),Promise.resolve().then(r.bind(r,99593)),Promise.resolve().then(r.bind(r,81423))},37303:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>components_FriendRequestSidebarOptions});var n=r(60080),a=r(14600),t=r(1712),i=r(11440),l=r.n(i),d=r(9885),o=r(52451),c=r.n(o),x=r(76116),m=r.n(x);let components_Icons2=function(){return n.jsx("div",{className:m().image_wrapper,children:n.jsx(c(),{className:m().logo_front,width:100,height:100,alt:"image",src:"/logored2.png"})})},components_FriendRequestSidebarOptions=({sessionId:e,initialUnseenRequestCount:s})=>{let[r,i]=(0,d.useState)(s);return(0,d.useEffect)(()=>{a.b.subscribe((0,t.h)(`user:${e}:incoming_friend_requests`)),a.b.subscribe((0,t.h)(`user:${e}:friends`));let friendRequestHandler=()=>{i(e=>e+1)},addedFriendHandler=()=>{i(e=>e-1)};return a.b.bind("incoming_friend_requests",friendRequestHandler),a.b.bind("new_friend",addedFriendHandler),()=>{a.b.unsubscribe((0,t.h)(`user:${e}:incoming_friend_requests`)),a.b.unsubscribe((0,t.h)(`user:${e}:friends`)),a.b.unbind("new_friend",addedFriendHandler),a.b.unbind("incoming_friend_requests",friendRequestHandler)}},[e]),(0,n.jsxs)(l(),{href:"/dashboard/requests",className:"text-gray-700 hover:text-indigo-600 hover:bg-gray-50 group flex items-center gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold",children:[n.jsx("div",{children:n.jsx(components_Icons2,{})}),n.jsx("p",{className:"truncate",children:"Friend Requests"}),r>0?n.jsx("div",{className:"rounded-full w-5 h-5 text-xs flex justify-center items-center text-white bg-indigo-600",children:r}):null]})}},21019:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>components_MobileChatLayout});var n=r(60080),a=r(82596),t=r(4184),i=r(7382),l=r(56206),d=r(52451),o=r.n(d),c=r(11440),x=r.n(c),m=r(9885),u=r(76116),h=r.n(u);let Icons=function(){return n.jsx("div",{className:h().image_wrapper,children:n.jsx(o(),{className:h().logo_front,width:100,height:100,alt:"image",src:"/logowhite.png"})})};var f=r(81423),g=r(88043),p=r(37303),b=r(99593),j=r(57114);let components_MobileChatLayout=({friends:e,session:s,sidebarOptions:r,unseenRequestCount:d})=>{let[c,u]=(0,m.useState)(!1),h=(0,j.usePathname)();return(0,m.useEffect)(()=>{u(!1)},[h]),(0,n.jsxs)("div",{className:"fixed bg-zinc-50 border-b border-zinc-200 top-0 inset-x-0 py-2 px-4",children:[(0,n.jsxs)("div",{className:"w-full flex justify-between items-center",children:[n.jsx(x(),{href:"/dashboard",className:(0,g.d)({variant:"ghost"}),children:n.jsx(Icons,{})}),(0,n.jsxs)(g.Z,{onClick:()=>u(!0),className:"gap-4",children:["Menu ",n.jsx(i.Z,{className:"h-6 w-6"})]})]}),n.jsx(a.u.Root,{show:c,as:m.Fragment,children:(0,n.jsxs)(t.V,{as:"div",className:"relative z-10",onClose:u,children:[n.jsx("div",{className:"fixed inset-0"}),n.jsx("div",{className:"fixed inset-0 overflow-hidden",children:n.jsx("div",{className:"absolute inset-0 overflow-hidden",children:n.jsx("div",{className:"pointer-events-none fixed inset-y-0 left-0 flex max-w-full pr-10",children:n.jsx(a.u.Child,{as:m.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:n.jsx(t.V.Panel,{className:"pointer-events-auto w-screen max-w-md",children:(0,n.jsxs)("div",{className:"flex h-full flex-col overflow-hidden bg-white py-6 shadow-xl",children:[n.jsx("div",{className:"px-4 sm:px-6",children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[n.jsx(t.V.Title,{className:"text-base font-semibold leading-6 text-gray-900",children:"Dashboard"}),n.jsx("div",{className:"ml-3 flex h-7 items-center",children:(0,n.jsxs)("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:()=>u(!1),children:[n.jsx("span",{className:"sr-only",children:"Close panel"}),n.jsx(l.Z,{className:"h-6 w-6","aria-hidden":"true"})]})})]})}),(0,n.jsxs)("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:[e.length>0?n.jsx("div",{className:"text-xs font-semibold leading-6 text-gray-400",children:"Your chats"}):null,n.jsx("nav",{className:"flex flex-1 flex-col",children:(0,n.jsxs)("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:[n.jsx("li",{children:n.jsx(b.default,{friends:e,sessionId:s.user.id})}),(0,n.jsxs)("li",{children:[n.jsx("div",{className:"text-xs font-semibold leading-6 text-gray-400",children:"Overview"}),(0,n.jsxs)("ul",{role:"list",className:"-mx-2 mt-2 space-y-1",children:[r.map(e=>n.jsx("li",{children:(0,n.jsxs)(x(),{href:e.href,className:"text-gray-700 hover:text-indigo-600 hover:bg-gray-50 group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold",children:[n.jsx("span",{className:"text-gray-400 border-gray-200 group-hover:border-indigo-600 group-hover:text-indigo-600 flex h-6 w-6 shrink-0 items-center justify-center rounded-lg border text-[0.625rem] font-medium bg-white",children:n.jsx(Icons,{})}),n.jsx("span",{className:"truncate",children:e.name})]})},e.name)),n.jsx("li",{children:n.jsx(p.default,{initialUnseenRequestCount:d,sessionId:s.user.id})})]})]}),(0,n.jsxs)("li",{className:"-ml-6 mt-auto flex items-center",children:[(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-x-4 px-6 py-3 text-sm font-semibold leading-6 text-gray-900",children:[n.jsx("div",{className:"relative h-8 w-8 bg-gray-50",children:n.jsx(o(),{fill:!0,referrerPolicy:"no-referrer",className:"rounded-full",src:s.user.image||"",alt:"Your profile picture"})}),n.jsx("span",{className:"sr-only",children:"Your profile"}),(0,n.jsxs)("div",{className:"flex flex-col",children:[n.jsx("span",{"aria-hidden":"true",children:s.user.name}),n.jsx("span",{className:"text-xs text-zinc-400","aria-hidden":"true",children:s.user.email})]})]}),n.jsx(f.default,{className:"h-full aspect-square"})]})]})})]})]})})})})})})]})})]})}},99593:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>components_SidebarChatList});var n=r(60080),a=r(14600),t=r(1712),i=r(57114),l=r(9885),d=r(10345),o=r(52451),c=r.n(o);let components_UnseenChatToast=({t:e,senderId:s,sessionId:r,senderImg:a,senderName:i,senderMessage:l})=>(0,n.jsxs)("div",{className:(0,t.cn)("max-w-md w-full bg-white shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5",{"animate-enter":e.visible,"animate-leave":!e.visible}),children:[n.jsx("a",{onClick:()=>d.Am.dismiss(e.id),href:`/dashboard/chat/${(0,t.M)(r,s)}`,className:"flex-1 w-0 p-4",children:(0,n.jsxs)("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 pt-0.5",children:n.jsx("div",{className:"relative h-10 w-10",children:n.jsx(c(),{fill:!0,referrerPolicy:"no-referrer",className:"rounded-full",src:a,alt:`${i} profile picture`})})}),(0,n.jsxs)("div",{className:"ml-3 flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:i}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l})]})]})}),n.jsx("div",{className:"flex border-l border-gray-200",children:n.jsx("button",{onClick:()=>d.Am.dismiss(e.id),className:"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:"Close"})})]}),components_SidebarChatList=({friends:e,sessionId:s})=>{let r=(0,i.useRouter)(),o=(0,i.usePathname)(),[c,x]=(0,l.useState)([]),[m,u]=(0,l.useState)(e);return(0,l.useEffect)(()=>{a.b.subscribe((0,t.h)(`user:${s}:chats`)),a.b.subscribe((0,t.h)(`user:${s}:friends`));let newFriendHandler=e=>{console.log("received new user",e),u(s=>[...s,e])},chatHandler=e=>{let r=o!==`/dashboard/chat/${(0,t.M)(s,e.senderId)}`;r&&(d.Am.custom(r=>n.jsx(components_UnseenChatToast,{t:r,sessionId:s,senderId:e.senderId,senderImg:e.senderImg,senderMessage:e.text,senderName:e.senderName})),x(s=>[...s,e]))};return a.b.bind("new_message",chatHandler),a.b.bind("new_friend",newFriendHandler),()=>{a.b.unsubscribe((0,t.h)(`user:${s}:chats`)),a.b.unsubscribe((0,t.h)(`user:${s}:friends`)),a.b.unbind("new_message",chatHandler),a.b.unbind("new_friend",newFriendHandler)}},[o,s,r]),(0,l.useEffect)(()=>{o?.includes("chat")&&x(e=>e.filter(e=>!o.includes(e.senderId)))},[o]),n.jsx("ul",{role:"list",className:"max-h-[25rem] overflow-y-auto -mx-2 space-y-1",children:m.sort().map(e=>{let r=c.filter(s=>s.senderId===e.id).length;return n.jsx("li",{children:(0,n.jsxs)("a",{href:`/dashboard/chat/${(0,t.M)(s,e.id)}`,className:"text-gray-700 hover:text-indigo-600 hover:bg-gray-50 group flex items-center gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold",children:[e.name,r>0?n.jsx("div",{className:"bg-indigo-600 font-medium text-xs text-white w-4 h-4 rounded-full flex justify-center items-center",children:r}):null]})},e.id)})})}},81423:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var n=r(60080),a=r(80087),t=r(90092),i=r(74284),l=r(9885),d=r(10345),o=r(88043);let __WEBPACK_DEFAULT_EXPORT__=({...e})=>{let[s,r]=(0,l.useState)(!1);return n.jsx(o.Z,{...e,variant:"ghost",onClick:async()=>{r(!0);try{await (0,i.signOut)()}catch(e){d.Am.error("There was a problem signing out")}finally{r(!1)}},children:s?n.jsx(a.Z,{className:"animate-spin h-4 w-4"}):n.jsx(t.Z,{className:"w-4 h-4"})})}},14600:(e,s,r)=>{"use strict";r.d(s,{b:()=>l});var n=r(61842),a=r.n(n),t=r(72068),i=r.n(t);new(a())({appId:process.env.PUSHER_APP_ID,key:"93f5d985ede86198e0c7",secret:process.env.PUSHER_APP_SECRET,cluster:"mt1",useTLS:!0});let l=new(i())("93f5d985ede86198e0c7",{cluster:"mt1"})},64813:e=>{e.exports={image_wrapper:"icons_image_wrapper__2aeIT",logo_front:"icons_logo_front__Vgu_6"}},76116:e=>{e.exports={image_wrapper:"icons_image_wrapper__2aeIT",logo_front:"icons_logo_front__Vgu_6"}},45585:e=>{e.exports={add_a_friend:"requests_add_a_friend__EFe7w",made_by:"requests_made_by__yz_Xa"}},84493:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>E,metadata:()=>U});var n=r(48144);r(53830);var a=r(75042),t=r.n(a),i=r(64813),l=r.n(i);let Icons=function(){return n.jsx("div",{className:l().image_wrapper,children:n.jsx(t(),{className:l().logo_front,width:100,height:100,alt:"image",src:"/logowhite.png"})})},components_Icons2=function(){return n.jsx("div",{className:l().image_wrapper,children:n.jsx(t(),{className:l().logo_front,width:100,height:100,alt:"image",src:"/logored2.png"})})};var d=r(17536);let o=(0,d.createProxy)(String.raw`C:\Users\User\Demo Apps For My Official Website\Good Website Models\chatappbydeo\src\components\SignOutButton.tsx`),{__esModule:c,$$typeof:x}=o,m=o.default;var u=r(73865),h=r(3471),f=r(44602),g=r.n(f),p=r(6465);let b=(0,d.createProxy)(String.raw`C:\Users\User\Demo Apps For My Official Website\Good Website Models\chatappbydeo\src\components\FriendRequestSidebarOptions.tsx`),{__esModule:j,$$typeof:v}=b,_=b.default;var y=r(60187),N=r(92810);let w=(0,d.createProxy)(String.raw`C:\Users\User\Demo Apps For My Official Website\Good Website Models\chatappbydeo\src\components\SidebarChatList.tsx`),{__esModule:I,$$typeof:P}=w,C=w.default,F=(0,d.createProxy)(String.raw`C:\Users\User\Demo Apps For My Official Website\Good Website Models\chatappbydeo\src\components\MobileChatLayout.tsx`),{__esModule:S,$$typeof:$}=F,q=F.default;var M=r(45585),R=r.n(M);let U={title:"FriendZone | Dashboard",description:"Your dashboard"},A=[{id:1,name:"Add A Friend",href:"/dashboard/add",Icon:"Icon"}],Layout=async({children:e})=>{let s=await (0,h.getServerSession)(u.L);s||(0,p.notFound)();let r=await (0,N.l)(s.user.id);console.log("friends",r);let a=(await (0,y.Y)("smembers",`user:${s.user.id}:incoming_friend_requests`)).length;return(0,n.jsxs)("div",{className:"w-full flex h-screen",children:[n.jsx("div",{className:"md:hidden",children:n.jsx(q,{friends:r,session:s,sidebarOptions:A,unseenRequestCount:a})}),(0,n.jsxs)("div",{className:"hidden md:flex h-full w-full max-w-xs grow flex-col gap-y-5 overflow-y-auto border-r border-gray-200 bg-white px-6",children:[n.jsx(g(),{href:"/dashboard",className:"flex h-16 shrink-0 items-center",children:n.jsx(Icons,{})}),r.length>0?(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{children:n.jsx("p",{className:R().made_by,children:"Made By Astrum Stellar | Deo Singiza"})}),n.jsx("div",{className:"text-xs font-semibold leading-6 text-gray-400",children:"Your chats"})]}):null,n.jsx("nav",{className:"flex flex-1 flex-col",children:(0,n.jsxs)("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:[n.jsx("li",{children:n.jsx(C,{sessionId:s.user.id,friends:r})}),(0,n.jsxs)("li",{children:[n.jsx("div",{className:"text-xs font-semibold leading-6 text-gray-400",children:"Overview"}),(0,n.jsxs)("ul",{role:"list",className:"-mx-2 mt-2 space-y-1",children:[A.map(e=>n.jsx("li",{children:(0,n.jsxs)(g(),{href:e.href,className:"text-gray-700 hover:text-indigo-600 hover:bg-gray-50 group flex gap-3 rounded-md p-2 text-sm leading-6 font-semibold",children:[n.jsx(components_Icons2,{}),n.jsx("span",{className:"truncate",children:e.name})]})},e.id)),n.jsx("li",{children:n.jsx(_,{sessionId:s.user.id,initialUnseenRequestCount:a})})]})]}),(0,n.jsxs)("li",{className:"-mx-6 mt-auto flex items-center",children:[(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-x-4 px-6 py-3 text-sm font-semibold leading-6 text-gray-900",children:[n.jsx("div",{className:"relative h-8 w-8 bg-gray-50",children:n.jsx(t(),{fill:!0,referrerPolicy:"no-referrer",className:R().Image_profile_avatar,style:{borderRadius:"50%"},src:s.user.image||"",alt:"Your profile picture"})}),n.jsx("span",{className:"sr-only",children:"Your profile"}),(0,n.jsxs)("div",{className:"flex flex-col",children:[n.jsx("span",{"aria-hidden":"true",children:s.user.name}),n.jsx("span",{className:"text-xs text-zinc-400","aria-hidden":"true",children:s.user.email})]})]}),n.jsx(m,{className:"h-full aspect-square"})]})]})})]}),n.jsx("aside",{className:"max-h-screen container py-16 md:py-12 w-full",children:e})]})},E=Layout},92810:(e,s,r)=>{"use strict";r.d(s,{l:()=>getFriendsByUserId});var n=r(60187);let getFriendsByUserId=async e=>{console.log("userid",e);let s=await (0,n.Y)("smembers",`user:${e}:friends`);console.log("friend ids",s);let r=await Promise.all(s.map(async e=>{let s=await (0,n.Y)("get",`user:${e}`),r=JSON.parse(s);return r}));return r}}};