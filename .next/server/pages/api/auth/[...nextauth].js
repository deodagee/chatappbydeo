"use strict";(()=>{var e={};e.id=748,e.ids=[748],e.modules={20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},10690:(e,r,t)=>{t.r(r),t.d(r,{config:()=>T,default:()=>R,routeModule:()=>f});var i={};t.r(i),t.d(i,{default:()=>h});var a=t(71802),s=t(47153),n=t(56249),o=t(47311);let l=require("@upstash/redis"),u=new l.Redis({url:process.env.UPSTASH_REDIS_REST_URL,token:process.env.UPSTASH_REDIS_REST_TOKEN}),d=require("next-auth/providers/google");var c=t.n(d);let _=process.env.UPSTASH_REDIS_REST_URL,p=process.env.UPSTASH_REDIS_REST_TOKEN;async function fetchRedis(e,...r){let t=`${_}/${e}/${r.join("/")}`,i=await fetch(t,{headers:{Authorization:`Bearer ${p}`},cache:"no-store"});if(!i.ok)throw Error(`Error executing Redis command: ${i.statusText}`);let a=await i.json();return a.result}function getGoogleCredentials(){let e=process.env.GOOGLE_CLIENT_ID,r=process.env.GOOGLE_CLIENT_SECRET;if(!e||0===e.length)throw Error("Missing GOOGLE_CLIENT_ID");if(!r||0===r.length)throw Error("Missing GOOGLE_CLIENT_SECRET");return{clientId:e,clientSecret:r}}let E={adapter:(0,o.mD)(u),session:{strategy:"jwt"},pages:{signIn:"/login"},providers:[c()({clientId:getGoogleCredentials().clientId,clientSecret:getGoogleCredentials().clientSecret})],callbacks:{async jwt({token:e,user:r}){let t=await fetchRedis("get",`user:${e.id}`);if(!t)return r&&(e.id=r.id),e;let i=JSON.parse(t);return{id:i.id,name:i.name,email:i.email,picture:i.image}},session:async({session:e,token:r})=>(r&&(e.user.id=r.id,e.user.name=r.name,e.user.email=r.email,e.user.image=r.picture),e),redirect:()=>"/dashboard"}},g=require("next-auth/next");var S=t.n(g);let h=S()(E),m=a.PagesAPIRouteModule,R=(0,n.l)(i,"default"),T=(0,n.l)(i,"config"),f=new m({definition:{kind:s.x.PAGES_API,page:"/api/auth/[...nextauth]",pathname:"/api/auth/[...nextauth]",bundlePath:"",filename:""},userland:i})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[44],()=>__webpack_exec__(10690));module.exports=t})();